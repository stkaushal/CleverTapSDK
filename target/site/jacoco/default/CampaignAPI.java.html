<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CampaignAPI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">CleverTap API SDK</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">CampaignAPI.java</span></div><h1>CampaignAPI.java</h1><pre class="source lang-java linenums">import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.json.JSONObject;

import com.fasterxml.jackson.annotation.JsonInclude.Include;
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.ObjectMapper;

import Helper.Enums.CampaignMethod;
import Helper.ClevertapInstance;
import Helper.Enums.Region;
import Payload.Campaign.CampaignContent.*;
import Payload.Campaign.CampaignPayload;
import Payload.Campaign.DateRangePayload;
import Payload.Campaign.To;
import Payload.Campaign.Where;
import Response.Response;

<span class="nc" id="L22">public class CampaignAPI {</span>
	public static void main(String[] args) throws IOException, InterruptedException {
    	
<span class="nc" id="L25">		String Cid = &quot;W8W-897-865Z&quot;;</span>
<span class="nc" id="L26">		String CPswd = &quot;042043bfc0ec4fd5ac14291840ec6c1e&quot;;</span>
<span class="nc" id="L27">		ClevertapInstance instance  = new ClevertapInstance(Cid, CPswd, Region.DEVELOPMENT);</span>
	   
<span class="nc" id="L29">	   ObjectMapper jsonMapper = new ObjectMapper();</span>
<span class="nc" id="L30">	   jsonMapper.setSerializationInclusion(Include.NON_NULL);</span>
<span class="nc" id="L31">	   jsonMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);</span>
	   
	   
	   //create campaign by id//
	   
	   //1. Email by ID
	   
//	   CampaignPayload campaignPayload = new CampaignPayload();
//	   To sendMessageTo = new To();
//	   String[] emailId = {&quot;dharmendra.shesma@gmail.com&quot;};
//	   sendMessageTo.setEmail(emailId);
//	   campaignPayload.setSendMessageTo(sendMessageTo);
//	   campaignPayload.setTagGroup(&quot;Target group for Dharmender&quot;);
//	   campaignPayload.setRespectFrequencyCaps(false);
//	   Content content = new Content();
//	   content.setTitle(&quot;Hello&quot;);
//	   content.setBody(&quot;Plan limit not over!&quot;);
//	   content.setSubject(&quot;Open up the mail bro&quot;);
//	   content.setSenderName(&quot;God Father&quot;);
//	   campaignPayload.setContent(content);
//	   campaignPayload.setCampaignSendTime(&quot;20210617 12:06&quot;);
//	   
//	   Response resCreateCampaignTUE = instance.getCampaignInstance().createCampaignTargetId(CampaignMethod.EMAIL, campaignPayload);
//	   JSONObject createCampaignTUEResponse= new JSONObject(jsonMapper.writeValueAsString(resCreateCampaignTUE));
//	   System.out.println(createCampaignTUEResponse.toString(4));
	   
	   //2. MobilePush by ID
	   
//	   CampaignPayload campaignPayload = new CampaignPayload();
//	   To sendMessageTo = new To();
//	   List&lt;String&gt; email = new ArrayList&lt;String&gt;();
//	   email.add(&quot;dharmendra.shesma@gmail.com&quot;);
//	   sendMessageTo.setEmail(email);
//	   campaignPayload.setSendMessageTo(sendMessageTo);
//	   
//	   campaignPayload.setTagGroup(&quot;Target group for Mobile Push 1&quot;);
//	   campaignPayload.setRespectFrequencyCaps(false);
//	   Content content = new Content();
//	   content.setTitle(&quot;Yup its working!&quot;);
//	   content.setBody(&quot;Mobile push is created.&quot;);
//	   
//	   PlatformSpecificContent platformSpecific = new PlatformSpecificContent();
//	   
//	   PlatformTypeAndroid android = new PlatformTypeAndroid();
//	   android.setBackgroundImageURL(&quot;https://image.shutterstock.com/image-photo/beautiful-sky-after-sunset-on-260nw-1715214265.jpg&quot;);
//	   android.setDefaultSound(true);
//	   android.setLargeIconURL(&quot;https://image.flaticon.com/icons/png/128/4863/4863961.png&quot;);
//	   android.setTimeToLive(10);
//	   
//	   platformSpecific.setPlatformTypeAndroid(android);
//	   
//	   content.setPlatformSpecificContent(platformSpecific);
//	   
//	   campaignPayload.setContent(content);
//	   campaignPayload.setCampaignSendTime(&quot;20210624 08:00&quot;);
//	   
//	   Response resCreateCampaignTUE = instance.getCampaignInstance().createCampaignTargetId(CampaignMethod.MOBILEPUSH, campaignPayload);
//	   JSONObject createCampaignTUEResponse= new JSONObject(jsonMapper.writeValueAsString(resCreateCampaignTUE));
//	   System.out.println(createCampaignTUEResponse.toString(4));
	   
	   
	   //3. SMS by ID
	   
//	   CampaignPayload campaignPayload = new CampaignPayload();
//	   To sendMessageTo = new To();
//	   List&lt;String&gt; email = new ArrayList&lt;String&gt;();
//	   email.add(&quot;dharmendra.shesma@gmail.com&quot;);
//	   sendMessageTo.setEmail(email);
//	   campaignPayload.setSendMessageTo(sendMessageTo);
//	   
//	   campaignPayload.setTagGroup(&quot;Target group for SMS by ID&quot;);
//	   campaignPayload.setRespectFrequencyCaps(false);
//	   Content content = new Content();
//	   content.setBody(&quot;Message sent from clevertap to check sms api for id&quot;);
//	   
//	   campaignPayload.setContent(content);
//	   campaignPayload.setCampaignSendTime(&quot;20210619 19:03&quot;);
//	   
//	   Response resCreateCampaignTUE = instance.getCampaignInstance().createCampaignTargetId(CampaignMethod.SMS, campaignPayload);
//	   JSONObject createCampaignTUEResponse= new JSONObject(jsonMapper.writeValueAsString(resCreateCampaignTUE));
//	   System.out.println(createCampaignTUEResponse.toString(4));
	   
	   
	   
	   /////create campaign by user event////
	   
	   //1.App Inbox
	   
//	   CampaignPayload campaignPayloadUE = new CampaignPayload();
//	   campaignPayloadUE.setCampaignName(&quot;Added to cart test - message-icon&quot;);
//	   campaignPayloadUE.setCampaignSendTime(&quot;20210618 12:31&quot;);
//	   
//	   Content content = new Content();	
//	   List&lt;Content&gt; contentList = new ArrayList&lt;Content&gt;();
//	   
//	   CampaignContentTitle title = new CampaignContentTitle();
//	   title.setText(&quot;Notification message-icon from pc, final&quot;);
//	   content.setTitle(title);
//	   
//	   CampaignContentMessage message = new CampaignContentMessage();
//	   message.setText(&quot;Last check&quot;);
//	   content.setMessage(message);
//	   
//	   CampaignContentIcon icon  = new CampaignContentIcon();
//	   icon.setContentType(&quot;image/jpg&quot;);
//	   icon.setMediaUrl(&quot;https://image.flaticon.com/icons/png/128/4863/4863961.png&quot;);
//	   content.setIcon(icon);
//	   
//	   CampaignContentMedia media = new CampaignContentMedia();
//	   media.setContentType(&quot;image/jpg&quot;);
//	   media.setMediaUrl(&quot;https://image.shutterstock.com/image-photo/beautiful-sky-after-sunset-on-260nw-1715214265.jpg&quot;);
//	   content.setMedia(media);
//	   
//	   contentList.add(content);
//	   campaignPayloadUE.setContent(contentList);
//	   
//	   Where campaignSendTo = new Where();
//	   campaignSendTo.setEventName(&quot;Added To Cart&quot;);
//	   campaignSendTo.setFromDate(20210606);
//	   campaignSendTo.setToDate(20210618);
//	   campaignPayloadUE.setCampaignSendTo(campaignSendTo);
//	   
//	   campaignPayloadUE.setEstimateOnly(false);
//	   campaignPayloadUE.setTargetMode(CampaignMethod.APPINBOX);
//	   campaignPayloadUE.setRespectFrequencyCaps(false);
//	   campaignPayloadUE.setSendToAllDevices(true);
////	   campaignPayloadUE.setTemplateType(&quot;simple&quot;);
////	   campaignPayloadUE.setTemplateType(&quot;carousel&quot;);
////	   campaignPayloadUE.setTemplateType(&quot;carousel-image&quot;);
//	   campaignPayloadUE.setTemplateType(&quot;message-icon&quot;);
//	   campaignPayloadUE.setOrientation(&quot;p&quot;);
//	   
//	   List&lt;String&gt; devices = new  ArrayList&lt;String&gt;();
//	   devices.add(&quot;android&quot;);
//	   devices.add(&quot;ios&quot;);
//	   campaignPayloadUE.setDevices(devices);
//	   campaignPayloadUE.setTimeToLiveForAppInbox(50);
//	   
//	   Response resCreateCampaignTUE = instance.getCampaignInstance().createCampaignTargetUserEvents(campaignPayloadUE);
//	   JSONObject createCampaignTUEResponse= new JSONObject(jsonMapper.writeValueAsString(resCreateCampaignTUE));
//	   System.out.println(createCampaignTUEResponse.toString(4));
	   
	   //2.SMS
	   
//	   CampaignPayload campaignPayloadUE = new CampaignPayload();
//	   campaignPayloadUE.setCampaignName(&quot;SMS Campaign 1&quot;);
//	   campaignPayloadUE.setCampaignSendTime(&quot;now&quot;);
//	   
//	   Where campaignSendTo = new Where();
//	   campaignSendTo.setEventName(&quot;Purchase Made&quot;);
//	   campaignSendTo.setFromDate(20210606);
//	   campaignSendTo.setToDate(20210618);
//	   campaignPayloadUE.setCampaignSendTo(campaignSendTo);
//	   
//	   campaignPayloadUE.setEstimateOnly(false);
//	   campaignPayloadUE.setTargetMode(CampaignMethod.SMS);
//	   campaignPayloadUE.setRespectFrequencyCaps(false);
//	   
//	   Content content = new Content();
//	   content.setBody(&quot;SMS is also working!&quot;);
//	   campaignPayloadUE.setContent(content);
//	   
//	   Response resCreateCampaignTUE = instance.getCampaignInstance().createCampaignTargetUserEvents(campaignPayloadUE);
//	   JSONObject createCampaignTUEResponse= new JSONObject(jsonMapper.writeValueAsString(resCreateCampaignTUE));
//	   System.out.println(createCampaignTUEResponse.toString(4));
	   
	   
//	   //3.WebPush
//	   
//	   CampaignPayload campaignPayloadUE = new CampaignPayload();
//	   campaignPayloadUE.setCampaignName(&quot;WebPush Campaign 1&quot;);
//	   campaignPayloadUE.setCampaignSendTime(&quot;now&quot;);
//	   
//	   Where campaignSendTo = new Where();
//	   campaignSendTo.setEventName(&quot;Product viewed&quot;);
//	   campaignSendTo.setFromDate(20210606);
//	   campaignSendTo.setToDate(20210618);
//	   campaignPayloadUE.setCampaignSendTo(campaignSendTo);
//	   
//	   campaignPayloadUE.setEstimateOnly(false);
//	   campaignPayloadUE.setTargetMode(CampaignMethod.WEBPUSH);
//	   campaignPayloadUE.setRespectFrequencyCaps(false);
//	   
//	   Content content = new Content();
//	   content.setBody(&quot;Webpush is also working!&quot;);
//	   content.setTitle(&quot;Webpush!&quot;);
//	   HashMap&lt;String, Object&gt; platformSpecific = new HashMap&lt;String, Object&gt;();
//	   HashMap&lt;String, Object&gt; chrome = new HashMap&lt;String, Object&gt;();
//	   chrome.put(&quot;ttl&quot;, 50);
//	   chrome.put(&quot;require_interaction&quot;, true);
//	   chrome.put(&quot;cta_title1&quot;, &quot;title&quot;);
//	   platformSpecific.put(&quot;chrome&quot;, chrome);
//	   
//	   HashMap&lt;String, Object&gt; firefox = new HashMap&lt;String, Object&gt;();
//	   firefox.put(&quot;ttl&quot;, 50);
//	   platformSpecific.put(&quot;firefox&quot;, firefox);
//	   content.setPlatformSpecific(platformSpecific);
//	   campaignPayloadUE.setContent(content);
//	   
//	   Response resCreateCampaignTUE = instance.getCampaignInstance().createCampaignTargetUserEvents(campaignPayloadUE);
//	   JSONObject createCampaignTUEResponse= new JSONObject(jsonMapper.writeValueAsString(resCreateCampaignTUE));
//	   System.out.println(createCampaignTUEResponse.toString(4));
	   
	   
      //4.MobilePush
	   
//	   CampaignPayload campaignPayloadUE = new CampaignPayload();
//	   campaignPayloadUE.setCampaignName(&quot;Mobile Push Campaign 2&quot;);
//	   campaignPayloadUE.setCampaignSendTime(&quot;now&quot;);
//	   
//	   Where campaignSendTo = new Where();
//	   campaignSendTo.setEventName(&quot;Added To Cart&quot;);
//	   campaignSendTo.setFromDate(20210606);
//	   campaignSendTo.setToDate(20210624);
//	   campaignPayloadUE.setCampaignSendTo(campaignSendTo);
//	   
//	   campaignPayloadUE.setEstimateOnly(false);
//	   campaignPayloadUE.setTargetMode(CampaignMethod.MOBILEPUSH);
//	   campaignPayloadUE.setRespectFrequencyCaps(false);
//	   
//	   Content content = new Content();
//	   content.setBody(&quot;Mobilepush is also working!&quot;);
//	   content.setTitle(&quot;Mobilepush!&quot;);
//	   PlatformSpecificContent platformSpecific = new PlatformSpecificContent();
//	   
//	   PlatformTypeAndroid android = new PlatformTypeAndroid();
//	   android.setBackgroundImageURL(&quot;https://image.shutterstock.com/image-photo/beautiful-sky-after-sunset-on-260nw-1715214265.jpg&quot;);
//	   android.setDefaultSound(true);
//	   android.setLargeIconURL(&quot;https://image.flaticon.com/icons/png/128/4863/4863961.png&quot;);
//	   android.setTimeToLive(10);
//	   
//	   platformSpecific.setPlatformTypeAndroid(android);
//	   
//	   content.setPlatformSpecificContent(platformSpecific);
//	   
//	   campaignPayloadUE.setContent(content);
//	   
//	   List&lt;String&gt; devices = new  ArrayList&lt;String&gt;();
//	   devices.add(&quot;android&quot;);
//	   campaignPayloadUE.setDevices(devices);
//	   
//	   Response resCreateCampaignTUE = instance.getCampaignInstance().createCampaignTargetUserEvents(campaignPayloadUE);
//	   JSONObject createCampaignTUEResponse= new JSONObject(jsonMapper.writeValueAsString(resCreateCampaignTUE));
//	   System.out.println(createCampaignTUEResponse.toString(4));
	   
	   
	   
	   // stop scheduled//
	   
//	   CampaignPayload campaignPayloadStopC = new CampaignPayload();
//	   campaignPayloadStopC.setCampaignId(100001561);
//	   Response resCampaignPayloadStopC = instance.getCampaignInstance().stopScheduledCampaign(campaignPayloadStopC);
//	   JSONObject campaignPayloadStopCResponse= new JSONObject(jsonMapper.writeValueAsString(resCampaignPayloadStopC));
//	   System.out.println(campaignPayloadStopCResponse.toString(4));
	   
	   
	   
	   
	   //get campaigns//
	   
//	   DateRangePayload campaignPayloadgetC = new DateRangePayload();
//	   campaignPayloadgetC.setFromDate(20210629);
//	   campaignPayloadgetC.setToDate(20210629);
//	   Response resCampaignPayloadgetC = instance.getCampaignInstance().getCampaigns(campaignPayloadgetC);
//	   JSONObject campaignPayloadgetCResponse = new JSONObject(jsonMapper.writeValueAsString(resCampaignPayloadgetC));
//	   System.out.println(campaignPayloadgetCResponse.toString(4));
	   
	   
	   //get campaign report//
	   
//	   CampaignPayload campaignPayloadgetReport = new CampaignPayload();
//	   campaignPayloadgetReport.setCampaignId(1000000020);
//	   Response resCampaignPayloadgetReport = instance.getCampaignInstance().getCampaignReport(campaignPayloadgetReport);
//	   JSONObject campaignPayloadgetReportResponse = new JSONObject(jsonMapper.writeValueAsString(resCampaignPayloadgetReport));
//	   System.out.println(campaignPayloadgetReportResponse.toString(4));
<span class="nc" id="L306">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>